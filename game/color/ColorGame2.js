!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.ColorGame=n():t.ColorGame=n()}(window,function(){return function(t){var n={};function e(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,e),i.l=!0,i.exports}return e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:o})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)e.d(o,i,function(n){return t[n]}.bind(null,i));return o},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=0)}([function(t,n,e){"use strict";n.__esModule=!0;var o=e(1),i=e(2),r=function(){function t(t){var n=this;this.option={time:30,canvas:document.getElementById("canvas"),start:function(){document.getElementById("result").innerHTML="",document.getElementById("screen").style.display="block"},end:function(t){document.getElementById("screen").style.display="none",document.getElementById("result").innerHTML='<div class="result" style="width: 100%;">\n        <div class="block-inner" id="restart"> 您的得分是： '+t+" <br/> 点击重新玩一次</div>\n      </div>",o.addEvent(document.getElementById("restart"),"click",function(){n.reStart()})}},this.init(t)}return t.prototype.init=function(t){var n=this;this.option.start&&this.option.start(),this.step=0,this.score=0,t&&(Object.assign?Object.assign(this.option,t):o.extend(this.option,t,!0)),this.time=this.option.time,this.widthScale=this.option.canvas.width/this.option.canvas.getBoundingClientRect().width,document.getElementsByClassName("wgt-score")[0].innerHTML='得分：<span id="score">'+this.score+'</span>\n    时间：<span id="timer">'+this.time+"</span>",window.timer=setInterval(function(){0===n.time?(clearInterval(window.timer),n.option.end(n.score)):(n.time--,document.getElementById("timer").innerHTML=n.time.toString())},1e3),this.nextStep(),["mousedown","touchstart"].forEach(function(t){n.option.canvas.addEventListener(t,function(t){var e=o.windowToCanvas(n.option.canvas,t);n.option.canvas.getContext("2d").isPointInPath(e.x*n.widthScale,e.y*n.widthScale)&&(n.nextStep(),n.score++,document.getElementById("score").innerHTML=n.score.toString())})})},t.prototype.nextStep=function(){var t;this.step++,t=this.step<6?this.step+1:this.step<12?2*Math.floor(this.step/2):this.step<18?3*Math.floor(this.step/3):16;var n=this.option.canvas,e=n.getContext("2d");e.beginPath(),e.clearRect(0,0,n.width,n.width),e.closePath(),this.blockWidth=(n.width-2*(t-1)*this.widthScale)/t,this.randomBlock=Math.floor(t*t*Math.random());var o=i.getColor(this.step),r=o[0],a=o[1];this.positionArray=[];for(var c=0;c<Math.pow(t,2);c++){var u=Math.floor(c/t),l=c%t*(this.blockWidth+2),d=u*(this.blockWidth+2);this.positionArray.push({x:l,y:d}),c!==this.randomBlock&&s(e,r,l,d,this.blockWidth,this.blockWidth)}e.beginPath(),s(e,a,this.positionArray[this.randomBlock].x,this.positionArray[this.randomBlock].y,this.blockWidth,this.blockWidth),e.closePath()},t.prototype.reStart=function(){console.log("重新开始"),this.init(this.option)},t}();function s(t,n,e,o,i,r){t.fillStyle="#"+n,t.rect(e,o,i,r),t.fill()}n.default=r},function(t,n,e){"use strict";function o(){for(var t=navigator.userAgent,n=!0,e=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],o=0;o<e.length;o++)if(t.indexOf(e[o])>0){n=!1;break}return n}n.__esModule=!0,n.promisify=function(t){return function(){var n=Array.prototype.slice.call(arguments);return new Promise(function(e,o){n.push(function(t,n){t?o(t):e(n)}),t.apply(null,n)})}},n.isImageDom=function(t){return t&&["IMAGE","IMG"].includes(t.tagName)},n.extend=function(t,n,e){for(var o in n)!n.hasOwnProperty(o)||t.hasOwnProperty(o)&&!e||(t[o]=n[o])},n.addEvent=function(t,n,e){t.addEventListener?t.addEventListener(n,e,!1):t.attachEvent?t.attachEvent("on"+n,e):t["on"+n]=e},n.windowToCanvas=function(t,n){var e=t.getBoundingClientRect(),i=o()?n.clientX:n.changedTouches?n.changedTouches[0].clientX:n.clientX,r=o()?n.clientY:n.changedTouches?n.changedTouches[0].clientY:n.clientY;return{x:i-e.left,y:r-e.top}},n.IsPC=o,n.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},n.isInArray=function(t,n){for(var e=t.length;--e>-1;)if(n===t[e])return!0;return!1},n.isFunction=function(t){return"function"==typeof t},n.isString=function(t){return"string"==typeof t},n._getRootName=function(t,n){return"#"===n?t:n.split("-")[1]}},function(t,n,e){"use strict";function o(t,n){var e=Math.floor(Number(t)+(Math.random()<.5?-1:1)*n);return e>255?"ff":e>16?e.toString(16):e>0?"0"+e.toString(16):"00"}function i(t,n){return r(t,n).toString(16)+r(t,n).toString(16)+r(t,n).toString(16)}function r(t,n){return Math.floor(Math.random()*(n-t)+t)}n.__esModule=!0,n.getColor=function(t){for(var n=Math.floor(100/t),e=i(17,255),r=e.match(/[\da-z]{2}/g),s=0;s<r.length;s++)r[s]=parseInt(String(r[s]),16);return[e,o(r[0],n)+o(r[1],n)+o(r[2],n)]},n.getRandomColorNumber=o,n.randomColor=i,n.randomNum=r}]).default});